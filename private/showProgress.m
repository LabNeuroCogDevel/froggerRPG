function showProgress(w, s, e, map, runNum)

y_size = 943;
x_size = 1470;

stepsPerLevel = 50;

%for i = 1:length(moves); fprintf(1, 'moves{%d} = [ ...\n', i); for ii = 1:size(moves{i}, 1); fprintf(1, '\t%.4f %.4f; ...\n', moves{i}(ii,:)); end; fprintf(1, '\t];\n\n'); end
% for i = 1:length(movesxy); 
%     fprintf(1, 'moves{%d} = [ ...\n', i); 
%     for ii = 1:length(movesxy{i}.x); 
%         fprintf(1, '\t%.4f %.4f; ...\n', movesxy{i}.x(ii), movesxy{i}.y(ii)); 
%     end; 
%     fprintf(1, '\t];\n\n'); 
% end


moves{1} = [ ...
	6.0225 892.2768; ...
	16.0635 856.4823; ...
	38.1537 818.2192; ...
	54.2193 809.5792; ...
	71.2889 824.3907; ...
	87.3545 802.1734; ...
	107.4365 766.3789; ...
	129.5266 772.5504; ...
	148.6045 786.1276; ...
	164.6701 747.8645; ...
	192.7848 717.0072; ...
	213.8709 728.1158; ...
	224.9160 739.2245; ...
	];

moves{2} = [ ...
	224.9160 739.2245; ...
	236.9652 714.5386; ...
	267.0881 684.9156; ...
	280.1414 693.5556; ...
	291.1865 710.8357; ...
	301.2275 697.2585; ...
	316.2889 682.4470; ...
	333.3586 671.3384; ...
	355.4488 684.9156; ...
	365.4898 699.7271; ...
	373.5225 682.4470; ...
	390.5922 660.2297; ...
	419.7111 646.6525; ...
	438.7889 657.7611; ...
	454.8545 673.8069; ...
	];

moves{3} = [ ...
	453.8504 673.8069; ...
	461.8832 638.0124; ...
	474.9365 594.8122; ...
	499.0348 582.4692; ...
	517.1086 594.8122; ...
	527.1496 613.3266; ...
	539.1988 587.4064; ...
	546.2275 551.6119; ...
	559.2807 524.4575; ...
	577.3545 538.0347; ...
	587.3955 561.4863; ...
	596.4324 538.0347; ...
	608.4816 512.1145; ...
	621.5348 497.3030; ...
	634.5881 510.8802; ...
	642.6209 525.6918; ...
	];

moves{4} = [ ...
	642.6209 525.6918; ...
	650.6537 499.7716; ...
	665.7152 454.1027; ...
	697.8463 444.2284; ...
	705.8791 462.7428; ...
	723.9529 446.6970; ...
	736.0020 409.6682; ...
	757.0881 404.7310; ...
	772.1496 418.3082; ...
	779.1783 436.8226; ...
	787.2111 414.6054; ...
	804.2807 403.4967; ...
	818.3381 398.5596; ...
	841.4324 419.5425; ...
	854.4857 436.8226; ...
	];

moves{5} = [ ...
	840.4283 442.9941; ...
	851.4734 410.9025; ...
	873.5635 388.6852; ...
	896.6578 351.6564; ...
	923.7684 351.6564; ...
	931.8012 368.9365; ...
	944.8545 389.9195; ...
	956.9037 367.7022; ...
	976.9857 341.7821; ...
	983.0102 336.8449; ...
	997.0676 345.4849; ...
	1010.1209 373.8737; ...
	1019.1578 351.6564; ...
	1030.2029 338.0792; ...
	1051.2889 350.4221; ...
	1064.3422 366.4679; ...
	1069.3627 378.8109; ...
	];

moves{6} = [ ...
	1069.3627 378.8109; ...
	1089.4447 331.9077; ...
	1110.5307 304.7533; ...
	1128.6045 310.9247; ...
	1140.6537 329.4391; ...
	1154.7111 297.3475; ...
	1160.7357 264.0216; ...
	1180.8176 210.9470; ...
	1198.8914 155.4038; ...
	1221.9857 109.7349; ...
	1237.0471 86.2834; ...
	1262.1496 82.5805; ...
	1275.2029 104.7978; ...
	1281.2275 120.8436; ...
	1287.2520 130.7179; ...
	];

all_moves = [];
for mi = 1:length(moves)
    
    if mi>1
        moves{mi}(1,:) = moves{mi-1}(end,:);
    end
    
    xmin = moves{mi}(1,1);
    xmax = moves{mi}(end,1);
    xstep = (xmax - xmin)/(stepsPerLevel-1);
    xx = xmin:xstep:xmax;

%         pp = spline(moves{mi}(:,1), moves{mi}(:,2));
%         yy = ppval(pp, xx);

    yy = interp1(moves{mi}(:,1), moves{mi}(:,2), xx, 'pchip');

    all_moves = [all_moves; xx' yy'];

end
bg_dim = size(s.images.progress_bg.image);
scale = bg_dim(2)/x_size;

all_moves_scaled = scale*all_moves;

%plot(all_moves(:,1), y_size - all_moves(:,2))
 
oldTextSize=Screen('TextSize', w, 28);

cx = round(s.screen.res(1)/2);
cy = round(s.screen.res(2)/2);

bg_rect = round([cx-bg_dim(2)/2 ...
                 cy-bg_dim(1)/2 ...
                 cx+bg_dim(2)/2 ...
                 cy+bg_dim(1)/2]);

% display hill & frog - static, start position
Screen('DrawTexture', w, s.images.progress_bg.tex, [], bg_rect);%x1 y1 x2 y2]);
showfrog(((stepsPerLevel*(runNum-1))+1));
totalPoints = sum([e(:).cogPoints]) + sum([e(:).mapPoints]);
DrawFormattedText(w, sprintf('Points earned this round: %d\nTotal points: %d', totalPoints, round(s.events.totalScore)) , bg_rect(2)+200, bg_rect(1), ...
                                    s.map.colors.text);
Screen('Flip', w);
WaitSecs(1.0);

% display hill & frog - countdown
ptsStep = totalPoints/stepsPerLevel;
ct = 0;
for i = ((stepsPerLevel*(runNum-1))+1):stepsPerLevel*runNum
    ct = ct + 1;
    Screen('DrawTexture', w, s.images.progress_bg.tex, [], bg_rect);%x1 y1 x2 y2]);
    showfrog(i);
    thisPoints = totalPoints - ptsStep*ct;
    thisTotalScore = s.events.totalScore + ptsStep*ct;
    DrawFormattedText(w, sprintf('Points earned this round: %d\nTotal points: %d', round(thisPoints), round(thisTotalScore)) , bg_rect(2)+200, bg_rect(1), ...
                                    s.map.colors.text);
    Screen('Flip', w);
%    WaitSecs(.013);
end

DrawFormattedText(w, sprintf('Points earned this round: %d\nTotal points: %d', round(0), round(s.events.totalScore + totalPoints)) , bg_rect(2)+200, bg_rect(1), ...
                                s.map.colors.text);

% display hill & frog - static, end position
Screen('DrawTexture', w, s.images.progress_bg.tex, [], bg_rect);%x1 y1 x2 y2]);
showfrog(stepsPerLevel*runNum);
Screen('Flip', w);
WaitSecs(0.5);

Screen('TextSize', w, oldTextSize);


    function showfrog(move_loc)
        x = all_moves_scaled(move_loc, 1);
        y = all_moves_scaled(move_loc, 2);

        frog_dim = size(s.images.me.image);

        frog_rect = round([x ...
                           y-frog_dim(1) ...
                           x+frog_dim(2) ...
                           y ...
                           ]);

        frog_display_rect = frog_rect + [bg_rect(1) bg_rect(2) bg_rect(1) bg_rect(2)] + [25 0 25 0];
        Screen('DrawTexture', w, s.images.me.tex, [], frog_display_rect);
    end

end
